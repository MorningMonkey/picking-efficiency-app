# 倉庫ピッキング効率化アプリ — Spec Kit 仕様書

## 1. Product Summary

本アプリは、倉庫現場における  
「ピッキング → 梱包前ダブルチェック → 注文別検品 → 出荷準備」  
の一連の業務プロセスをデジタル化し、**作業効率化・誤出荷防止・品質向上**を実現する Web アプリケーションである。

ピッカー／パッカーがモバイル端末で直感的に操作できるよう、  
**視認性・片手操作・誤操作防止**を最優先として設計する。

---

## 2. Problem Statement / Goals

現場の課題：

- ピッキングミス（誤品・誤数量）
- 梱包前確認が曖昧でヒューマンエラーが発生しやすい
- 棚順が複雑で新人が迷いやすい
- ダブルチェックの基準が統一されていない
- 作業ログがなく改善に活用できない
- モバイル操作に特化した業務アプリが存在しない

本アプリのゴール：

- 誤ピック・誤出荷を大幅に削減
- 作業リズムを止めない軽快な UX
- 新人でも即戦力になる直感的 UI
- 棚順変更に柔軟に対応できる Location マスタ運用
- ダブルチェック工程の標準化
- AuditLog による改善サイクル実現

---

## 3. Users / Roles

| ロール          | 説明 | 主な操作 |
|----------------|------|-----------|
| **ピッカー**   | 商品を棚から集める担当 | ピッキング、スキャン、数量更新 |
| **パッカー**   | 梱包前および最終検品担当 | ダブルチェック、注文別検品 |
| **管理者**     | マスタ・オーダー・ログ管理 | データ登録、棚順メンテナンス、改善分析 |

---

## 4. User Stories

### ピッカー
- 棚順に従って迷わず移動したい  
- バーコードをスキャンした瞬間に正誤を知りたい  
- 片手で操作できる UI が必要  
- 数量ミスにすぐ気付ける仕組みがほしい  

### パッカー
- 注文単位の検品をわかりやすく行いたい  
- ピッキングミスを簡単に検知したい  
- 検品状態が一目で分かる UI がほしい  

### 管理者
- 棚順（sort_order）を自由に変更できるようにしたい  
- 誤ピック率や作業速度を改善分析に活用したい  
- CSV で受注データを取り込みたい  

---

## 5. Workflows

### 5.1 ピッキング
1. ピッキングリスト選択  
2. Location.sort_order の順に移動  
3. 商品バーコードスキャン  
4. qty_picked 更新  
5. 全アイテム揃うと「ピッキング完了」へ遷移  

### 5.2 梱包前ダブルチェック
1. リスト全体の数量整合性確認  
2. バーコードスキャン → qty_verified 更新  
3. 不一致があれば即エラー  
4. 全一致で次ステップへ  

### 5.3 注文単位ダブルチェック
1. 注文一覧から選択  
2. 注文内の全商品をスキャン  
3. qty_verified 更新  
4. 全注文 verified → PickingList.done  

### 5.4 出荷準備
- DONE 状態で出荷準備完了  
- AuditLog に履歴を保存  

---

## 6. Functional Requirements

### ピッキング機能
- 棚順ソートされたリスト表示  
- バーコードによる数量更新  
- 正誤フィードバック（色／音／振動）  
- 過剰ピック防止（required_qty を超えない）  
- ピッキング完了判定  

### 梱包前ダブルチェック
- 全体数量整合性チェック  
- 不一致エラー表示  
- チェック完了でステータス遷移  

### 注文別ダブルチェック
- OrderItem 単位で検品  
- qty_verified のリアルタイム更新  
- 不一致・過剰スキャンエラー  

### マスタ管理
- Location（display_code / sort_order）  
- Product  
- Order / OrderItem  

### ログ・監査
- AuditLog に以下を保存  
  - スキャン履歴  
  - ステータス遷移  
  - 操作者  

---

## 7. Non-Functional Requirements

### パフォーマンス
- スキャン応答は 150ms 以内を推奨  

### UI / UX
- 大型ボタン  
- 片手操作前提のレイアウト  
- 色覚バリアフリー配色  
- 高齢者でも視認しやすいフォント  

### 利用環境
- スマホブラウザ最適化  
- 不安定回線時の再試行処理  

### 安定性
- Django + PostgreSQL の構成  
- エラーログ・監査ログ保持  

---

## 8. Data Model Overview

### マスタ
- **Product**  
- **Location**（display_code, sort_order）

### トランザクション
- **Order / OrderItem**  
- **PickingList / PickingListItem**

### 検品
- **DoubleCheckSession**  
- **DoubleCheckItem**

### ログ
- **AuditLog**

---

## 9. Constraints / Assumptions
- モバイル端末での使用が前提  
- 片手操作が必須  
- IT リテラシーが幅広い現場で使える必要がある  
- 棚順は倉庫ごとに異なるため sort_order は可変  
- オフライン対応は将来的な拡張  
- 誤ピック防止のため数量ロジックは厳格  

---

## 10. Success Criteria
- 誤ピック・誤出荷率の明確な減少  
- ピッキング・検品の作業時間短縮  
- 新人が 10 分以内に操作理解できる  
- ダブルチェック精度の改善  
- ログが改善活動に役立つ状態  

---

## 11. Out of Scope
- オフラインモード  
- 自動倉庫システムとの完全統合  
- 音声ピッキング  
- ロボット連携  
